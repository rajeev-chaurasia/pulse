# Pulse Data Platform - Spark Configuration
# Optimized for High-Throughput Streaming & Iceberg

# -------------------------------------------------------------------------
# Iceberg & Catalog Configuration
# -------------------------------------------------------------------------
spark.sql.extensions                   org.apache.iceberg.spark.extensions.IcebergSparkSessionExtensions
spark.sql.catalog.pulse_lake           org.apache.iceberg.spark.SparkCatalog
spark.sql.catalog.pulse_lake.type      hadoop
spark.sql.catalog.pulse_lake.warehouse s3a://pulse-lakehouse-data/warehouse

# -------------------------------------------------------------------------
# S3 / Hadoop Configuration (for AWS access)
# -------------------------------------------------------------------------
spark.hadoop.fs.s3a.impl               org.apache.hadoop.fs.s3a.S3AFileSystem
spark.hadoop.fs.s3a.fast.upload        true
spark.hadoop.fs.s3a.multipart.size     104857600
spark.hadoop.fs.s3a.connection.maximum 100

# -------------------------------------------------------------------------
# Serialization & Performance
# -------------------------------------------------------------------------
spark.serializer                       org.apache.spark.serializer.KryoSerializer
spark.sql.shuffle.partitions           200
spark.default.parallelism              20
spark.streaming.backpressure.enabled   true
spark.streaming.kafka.maxRatePerPartition 2000
